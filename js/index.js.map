{"version":3,"sources":["../src/index.js"],"names":["NAMES","HEPINDEX","map","name","Card","props","state","spaces","card","event","temp","slice","keyCode","hold","i","setState","newSpaces","color","index","push","type","e","rotateDisplay","onClick","display","selected","React","Component","Header","myTurn","OtherHands","played","PlayedTiles","MyHand","gameState","discardClicked","playClicked","cards","renderButton","Community","basin","colorCounts","listBasin","count","Board","listBoard","Login","username","password","target","value","updateUsername","updatePassword","Waiting","players","renderPlayers","Display","selectorClick","hands","allPlayed","length","renderOtherHands","renderSelector","j","boardClick","Game","selectCards","ID","handleCardClick","playedRaw","selectedColor","isSwap","rawCards","socket","on","updateActiveCards","queuedForDiscard","Array","discardCount","fill","cardsToRemove","cardsToDiscard","includes","matched","k","cardsEqual","splice","processCode","emit","newHand","user","getCookie","id","number","selectedNumberCard","action","selectedActionCard","spaceState","tempPlayed","isActive","newPlayed","rest","pid","cardType","accessable","selectCardsIndex","tempDiscard","found","newSelected","active","currentPlayer","prevState","newCounts","setupcomplete","emitCheck","selectColor","newState","isActiveReflexed","rotation","nameSpaces","arraysAreRotations","purgeNull","cardSpaces","boardSpaces","purged","handleSelectorClick","handleBoardClick","handlePlayClick","handleDiscardClick","waiting","showMe","connectTo","io","connect","currentCookie","localData","console","log","renderLogin","data","Object","assign","renderGame","document","cookie","renderLobby","ReactDOM","render","getElementById","availableGames","pass","logMeIn","a","b","one","two","three","four","five","six","seven","decodedCookie","decodeURIComponent","ca","split","c","charAt","substring","indexOf","Lobby","available","creator","lobbies","games","joinRoom","createNewValues","selectChange","nameChange","renderAvailable"],"mappings":"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","file":"index.js","sourcesContent":["\r\n\r\nconst NAMES = [\"one\", \"two\", \"three\", \"four\", \"five\", \"six\", \"seven\"];\r\n\r\nconst HEPINDEX = NAMES.map(name => name + \"hep\");\r\n\r\nclass Card extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            spaces: props.card.spaces,\r\n            card: props.card,\r\n        }\r\n    }\r\n\r\n    rotateDisplay(event) {\r\n        let temp = this.state.spaces.slice();\r\n        if (event.keyCode === 81) {\r\n            let hold = temp[0];\r\n            for (var i = 0; i < 6; i++) {\r\n                temp[i] = temp[i + 1];\r\n            }\r\n            temp[6] = hold;\r\n        } else if (event.keyCode === 69) {\r\n            let hold = temp[6];\r\n            for (var i = 6; i > 0; i--) {\r\n                temp[i] = temp[i - 1];\r\n            }\r\n            temp[0] = hold;\r\n        }\r\n        this.setState({\r\n            spaces: temp\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let newSpaces = this.state.spaces.map((color, index) => <li key={index} className={\"dot small \" + color + \" \" + HEPINDEX[index]}>{}</li>);\r\n        newSpaces.push(<li key={7} className=\"cardType\">{this.props.card.type}</li>);\r\n        return (<div onKeyDown={(e) => this.rotateDisplay(e)}\r\n            tabIndex=\"0\"\r\n            className=\"cardRotateContainer\">\r\n            <ul onClick={() => this.props.onClick(this.state.card)}\r\n                className={\"card \" + this.props.display + \" \" + this.props.selected}\r\n            >  {newSpaces} </ul></div>);\r\n    }\r\n}\r\n\r\nfunction Header(props) {\r\n    let myTurn = props.myTurn ? \"My turn\" : \"Not my turn\";\r\n    return <p>{myTurn}</p>\r\n}\r\n\r\nfunction OtherHands(props) {\r\n    return <div className=\"otherHands\">\r\n        {props.played}\r\n    </div>;\r\n}\r\n\r\nfunction PlayedTiles(props) {\r\n    return <div className=\"playedtiles\">{props.played}</div>;\r\n}\r\n\r\nclass MyHand extends React.Component {\r\n    renderButton() {\r\n        if (this.props.gameState === 'discardphase') {\r\n            return <button onClick={() => this.props.discardClicked()} className={\"playbutton\"}>{\"DiscardTiles\"}</button>\r\n        } else {\r\n            return <button disabled={(this.props.gameState === \"setup\") || !this.props.myTurn} onClick={() => this.props.playClicked()} className={\"playbutton\"}>{\"Play Tiles\"}</button>\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"hand\">\r\n            {this.props.cards}\r\n            {this.renderButton()}\r\n        </div>;\r\n    }\r\n}\r\n\r\nfunction Community(props) {\r\n    const basin = props.colorCounts;\r\n    const listBasin = basin.map(color => (\r\n        <button\r\n            className={\"dot \" + color.color}\r\n            key={color.color}\r\n            onClick={() => props.onClick(color)}\r\n        >\r\n            {color.count}\r\n        </button>\r\n    ));\r\n    return <ul>{listBasin}</ul>;\r\n}\r\n\r\nfunction Board(props) {\r\n    const spaces = props.spaces;\r\n    const listBoard = spaces.map((color, index) => (\r\n        <button\r\n            className={\"dot \" + color + \" \" + HEPINDEX[index]}\r\n            key={index}\r\n            onClick={() => props.onClick(color, index)}\r\n        >{}</button>\r\n    ));\r\n    return <ul className=\"board\">{listBoard}</ul>;\r\n}\r\n\r\nclass Login extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\"\r\n        }\r\n    }\r\n\r\n    updatePassword(e) {\r\n        this.setState({\r\n            password: e.target.value\r\n        })\r\n    }\r\n\r\n    updateUsername(e) {\r\n        this.setState({\r\n            username: e.target.value\r\n        });\r\n    }\r\n    \r\n    render() {\r\n        return <div className={\"Login\"}>\r\n            <form id=\"login\">\r\n                <label htmlFor={\"uname\"}><b>{\"Username\"}</b></label>\r\n                <input type={\"text\"} id={\"uname\"} placeholder={\"Enter Username\"} onChange={(e) => this.updateUsername(e)}></input>\r\n                <label htmlFor={\"passw\"}><b>{\"Password\"}</b></label>\r\n                <input type={\"text\"} id={\"passw\"} placeholder={\"Enter Password\"} onChange={(e) => this.updatePassword(e)}></input>\r\n                <button onClick={() => this.props.onClick(this.state.username, this.state.password)} type={\"button\"}>{\"Login\"}</button>\r\n            </form>\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass Waiting extends React.Component {\r\n    renderPlayers() {\r\n        return <ul>{this.props.players}</ul>\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={\"Waiting\"}>\r\n                {this.renderPlayers()}\r\n            </div>);\r\n    }\r\n}\r\n\r\nclass Display extends React.Component {\r\n    renderSelector() {\r\n        return (\r\n            <Community\r\n                onClick={i => this.props.selectorClick(i)}\r\n                colorCounts={this.props.colorCounts}\r\n            />\r\n        );\r\n    }\r\n\r\n    renderOtherHands() {\r\n        let hands = [];\r\n        for (let i = 0; i < this.props.allPlayed.length; i++) {\r\n            hands.push(<OtherHands played={this.props.allPlayed[i]}/>);\r\n        }\r\n        return hands;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"display\">\r\n                {this.renderOtherHands()}\r\n                <Header myTurn={this.props.myTurn}/>\r\n                {this.renderSelector()}\r\n                <Board\r\n                    onClick={(i, j) => this.props.boardClick(i, j)}\r\n                    spaces={this.props.spaces}\r\n                />\r\n                <PlayedTiles played={this.props.played} />\r\n                <MyHand playClicked={() => this.props.playClicked()} \r\n                        discardClicked={() => this.props.discardClicked()}\r\n                        cards={this.props.cards} \r\n                        myTurn={this.props.myTurn}\r\n                        gameState={this.props.gameState}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass Game extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let selectCards = props.selectCards;\r\n        let cards = selectCards.map((name) => { return (<Card key={name.ID} onClick={(i) => this.handleCardClick(i)} display={\"\"} card={name} />) });\r\n        this.state = {\r\n            playedRaw: props.played,\r\n            played: [],\r\n            selectedColor: null,\r\n            isSwap: false,\r\n            index: null,\r\n            rawCards: selectCards,\r\n            cards: cards,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.on('boardChange', () => {\r\n            this.setState({\r\n                cards: this.updateActiveCards(this.props.spaces, this.props.selectCards),\r\n                played: this.updateActiveCards(this.props.spaces, this.props.played)\r\n            });\r\n        });\r\n        this.props.socket.on('cardPlayed', () => {\r\n            this.setState({\r\n                cards: this.updateActiveCards(this.props.spaces, this.props.selectCards),\r\n                played: this.updateActiveCards(this.props.spaces, this.props.played)\r\n            });\r\n        });\r\n        this.props.socket.on('cardUpdate', () => {\r\n            this.setState({\r\n                cards: this.updateActiveCards(this.props.spaces, this.props.selectCards),\r\n                played: this.updateActiveCards(this.props.spaces, this.props.played)\r\n            });\r\n        });\r\n        this.props.socket.on('discardphase', () => {\r\n           this.setState({\r\n               queuedForDiscard: Array(this.props.discardCount).fill(null)\r\n           }) \r\n        });\r\n    }\r\n    \r\n    handleDiscardClick() {\r\n        let cardsToRemove = this.props.selectCards.slice();\r\n        let cardsToDiscard = this.state.queuedForDiscard.slice();\r\n        let j = 0;\r\n        if (!cardsToDiscard.includes(null)) {\r\n            while (j < cardsToRemove.length) {\r\n                let matched = false;\r\n                for (let k = 0; k < cardsToDiscard.length; k++) {\r\n                    if (cardsEqual(cardsToRemove[j], cardsToDiscard[k])) {\r\n                        cardsToRemove.splice(j, 1);\r\n                        cardsToDiscard.splice(k, 1);\r\n                        matched = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!matched) {\r\n                    j++;\r\n                }\r\n            }\r\n            if (this.props.processCode === null) {\r\n                socket.emit('discardPresetup', {\r\n                    newHand: cardsToRemove,\r\n                    user: getCookie(),\r\n                    id: this.props.id\r\n\r\n                });\r\n            } else {\r\n                socket.emit('discardNormalHand', cardsToRemove);\r\n            }\r\n        }\r\n    }\r\n\r\n    handlePlayClick() {\r\n        let number = this.state.selectedNumberCard;\r\n        let action = this.state.selectedActionCard;\r\n        let spaceState = this.props.spaces.slice();\r\n        let tempPlayed = [];\r\n        let cardsToRemove = this.props.selectCards.slice();\r\n        if (number != null && action != null) {\r\n            if (this.isActive(spaceState, number) && this.isActive(spaceState, action) && (action.type != \"A\" && action.type != \"R\" && action.type != \"H\")) {\r\n                let j = 0;\r\n                while (j < cardsToRemove.length) {\r\n                    if (cardsEqual(cardsToRemove[j], number) || cardsEqual(cardsToRemove[j], action)) {\r\n                        tempPlayed.push(cardsToRemove.splice(j, 1)[0]);\r\n                    } else {\r\n                        j++;\r\n                    }\r\n                }\r\n            }\r\n        } else if (action != null) {\r\n            if (this.isActive(spaceState, action) && (action.type === \"A\" || action.type === \"R\" || action.type === \"H\")) {\r\n                let j = 0;\r\n                while (j < cardsToRemove.length) {\r\n                    if (cardsEqual(cardsToRemove[j], action)) {\r\n                        tempPlayed.push(cardsToRemove.splice(j, 1)[0]);\r\n                    } else {\r\n                        j++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.setState({\r\n            selectedNumberCard: null,\r\n            selectedActionCard: null,\r\n        });\r\n        socket.emit('cardPlayed', {\r\n            newPlayed: tempPlayed,\r\n            rest: cardsToRemove,\r\n            pid: this.props.pid\r\n        });\r\n    }\r\n\r\n    handleCardClick(i) {\r\n        let selectCards = this.props.selectCards.slice();\r\n        let played = this.props.played.slice();\r\n        let cardType = i.type;\r\n        let accessable = this.props.processCode === null ? selectCards.length : this.props.processCode;\r\n        let selectCardsIndex = -1;\r\n        for (let j = 0; j < selectCards.length; j++) {\r\n            if (cardsEqual(i, selectCards[j])) {\r\n                selectCardsIndex = j;\r\n                break;\r\n            }\r\n        }\r\n        if (this.props.gameState === 'discardphase') {\r\n            let tempDiscard = this.state.queuedForDiscard.slice();\r\n            if (selectCardsIndex >= selectCards.length - accessable) {\r\n                let found = false;\r\n                for (let j = 0; j < tempDiscard.length; j++) {\r\n                    if (cardsEqual(tempDiscard[j], i)) {\r\n                        tempDiscard[j] = null;\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!found && tempDiscard.includes(null)) {\r\n                    for (let j = 0; j < tempDiscard.length; j++) {\r\n                        if (tempDiscard[j] === null) {\r\n                            tempDiscard[j] = i;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                this.setState({\r\n                    queuedForDiscard: tempDiscard,\r\n                    cards: selectCards.map((name) => {\r\n                        let selected = \"\";\r\n                        for (let j = 0; j < tempDiscard.length; j++) {\r\n                            if (cardsEqual(tempDiscard[j], name)) {\r\n                                selected = \"selectedCard\";\r\n                                break;\r\n                            }\r\n                        }\r\n                        return (<Card key={name.ID} selected={selected} onClick={(i) => this.handleCardClick(i)} display={\"\"} card={name} />);\r\n                    }),\r\n                })\r\n            }\r\n        } else {\r\n            if (cardType === \"1\" || cardType === \"2\" || cardType === \"3\") {\r\n                let newSelected = (i === this.state.selectedNumberCard) ? null : i;\r\n                this.setState({\r\n                    selectedNumberCard: newSelected,\r\n                    cards: selectCards.map((name) => {\r\n                        let active = this.isActive(this.props.spaces, name) ? \"active\" : \"\";\r\n                        let selected = (cardsEqual(name, newSelected) || cardsEqual(name, this.state.selectedActionCard)) ? \"selectedCard\" : \"\";\r\n                        return (<Card key={name.ID} selected={selected} onClick={(i) => this.handleCardClick(i)} display={active} card={name} />);\r\n                    }),\r\n                    played: played.map((name) => {\r\n                        let active = this.isActive(this.props.spaces, name) ? \"active\" : \"\";\r\n                        let selected = (cardsEqual(name, newSelected) || cardsEqual(name, this.state.selectedActionCard)) ? \"selectedCard\" : \"\";\r\n                        return (<Card key={name.ID} selected={selected} onClick={(i) => this.handleCardClick(i)} display={active} card={name} />);\r\n                    })\r\n                });\r\n            } else {\r\n                let newSelected = (i === this.state.selectedActionCard) ? null : i;\r\n                this.setState({\r\n                    selectedActionCard: newSelected,\r\n                    cards: selectCards.map((name) => {\r\n                        let active = this.isActive(this.props.spaces, name) ? \"active\" : \"\";\r\n                        let selected = (cardsEqual(name, newSelected) || cardsEqual(name, this.state.selectedNumberCard)) ? \"selectedCard\" : \"\";\r\n                        return (<Card key={name.ID} selected={selected} onClick={(i) => this.handleCardClick(i)} display={active} card={name} />);\r\n                    }),\r\n                    played: played.map((name) => {\r\n                        let active = this.isActive(this.props.spaces, name) ? \"active\" : \"\";\r\n                        let selected = (cardsEqual(name, newSelected) || cardsEqual(name, this.state.selectedNumberCard)) ? \"selectedCard\" : \"\";\r\n                        return (<Card key={name.ID} selected={selected} onClick={(i) => this.handleCardClick(i)} display={active} card={name} />);\r\n                    })\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    handleSelectorClick(i) {\r\n        if (this.props.currentPlayer === this.props.pid) {\r\n            if (i.count > 0) {\r\n                this.setState({\r\n                    selectedColor: i.color,\r\n                    isSwap: false,\r\n                    index: null,\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    handleBoardClick(i, index) {\r\n        const prevState = this.state;\r\n        if (this.props.currentPlayer === this.props.pid) {\r\n            if (this.props.gameState === \"setup\") {\r\n                if (prevState.selectedColor != null && this.props.spaces[index] === null) {\r\n                    // swap with stack\r\n                    let newSpaces = this.props.spaces.slice();\r\n                    newSpaces[index] = prevState.selectedColor;\r\n                    let newCounts = this.props.colorCounts.slice();\r\n                    let setupcomplete = true;\r\n                    for (var j = 0; j < 7; j++) {\r\n                        if (newSpaces[j] === null) {\r\n                            setupcomplete = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    for (var j = 0; j < newCounts.length; j++) {\r\n                        if (newCounts[j].color === prevState.selectedColor) {\r\n                            newCounts[j].count--;\r\n                        }\r\n                        if (\r\n                            this.props.spaces[index] != null &&\r\n                            this.props.spaces[index] === newCounts[j].color\r\n                        ) {\r\n                            newCounts[j].count++;\r\n                        }\r\n                    }\r\n                    socket.emit('boardChange', {newSpaces: newSpaces, newCounts: newCounts});\r\n                    this.setState({\r\n                        selectedColor: null,\r\n                        isSwap: false,\r\n                        index: null,\r\n                        gameState: setupcomplete ? \"\" : \"setup\"\r\n                    });\r\n                }\r\n            } else {\r\n                if (prevState.index === index) {\r\n                    //Selecting already selected deselects\r\n                    this.setState({\r\n                        selectedColor: null,\r\n                        isSwap: false,\r\n                        index: null\r\n                    });\r\n                } else if (prevState.selectedColor != null) {\r\n                    // swap with stack\r\n                    let newSpaces = this.props.spaces.slice();\r\n                    newSpaces[index] = prevState.selectedColor;\r\n                    let newCounts = this.props.colorCounts.slice();\r\n                    for (var j = 0; j < newCounts.length; j++) {\r\n                        if (newCounts[j].color === prevState.selectedColor) {\r\n                            newCounts[j].count--;\r\n                        }\r\n                        if (\r\n                            this.props.spaces[index] != null &&\r\n                            this.props.spaces[index] === newCounts[j].color\r\n                        ) {\r\n                            newCounts[j].count++;\r\n                        }\r\n                    }\r\n                    let emitCheck = this.props.gameState === 'bonusswap' ? 'bonusswap' : 'boardChange';\r\n                    socket.emit(emitCheck, {newSpaces: newSpaces, newCounts: newCounts});\r\n                    this.setState({\r\n                        selectedColor: null,\r\n                        isSwap: false,\r\n                        index: null,\r\n                    });\r\n                } else if (prevState.isSwap) {\r\n                    //Swapping with active thing\r\n                    let newSpaces = this.props.spaces.slice();\r\n                    let temp = newSpaces[index];\r\n                    newSpaces[index] = newSpaces[prevState.index];\r\n                    newSpaces[prevState.index] = temp;\r\n                    let emitCheck = this.props.gameState === 'bonusswap' ? 'bonusswap' : 'boardChange';\r\n                    socket.emit(emitCheck, {newSpaces: newSpaces, newCounts: this.props.colorCounts});\r\n                    this.setState({\r\n                        selectColor: null,\r\n                        isSwap: false,\r\n                        index: null,\r\n                    });\r\n                } else {\r\n                    //Selecting for swap\r\n                    this.setState({\r\n                        selectColor: null,\r\n                        isSwap: true,\r\n                        index: index\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    updateActiveCards(newState, selectCards) {\r\n        return (selectCards.map((name) => {\r\n            let active = \"\";\r\n            if (this.isActive(newState, name)) {\r\n                active = \"active\";\r\n            } else if (this.props.gameState === \"reflexed\" && this.isActiveReflexed(newState, name)) {\r\n                active = \"activeReflexed\";\r\n            }\r\n            let selected = (this.state.selectedActionCard === name || this.state.selectedNumberCard === name) ? \"selectedCard\" : \"\";\r\n            return (<Card key={name.ID} onClick={(i) => this.handleCardClick(i)} selected={selected} display={active} card={name} />);\r\n        }));\r\n    }\r\n\r\n    isActive(newState, name) {\r\n        let rotation = newState.slice();\r\n        let nameSpaces = name.spaces.slice();\r\n        return this.arraysAreRotations(nameSpaces, rotation);\r\n    }\r\n\r\n    isActiveReflexed(newState, name) {\r\n        let rotation = this.purgeNull(newState);\r\n        let nameSpaces = this.purgeNull(name.spaces);\r\n        return this.arraysAreRotations(nameSpaces, rotation);\r\n    }\r\n\r\n    arraysAreRotations(cardSpaces, boardSpaces) {\r\n        let active = true;\r\n        for (let j = 0; j < boardSpaces.length; j++) {\r\n            active = false;\r\n            let k = 0;\r\n            for (let i = 0; i < boardSpaces.length; i++) {\r\n                if (cardSpaces[k] === null || cardSpaces[k] === boardSpaces[i]) {\r\n                    k++;\r\n                    if (k === cardSpaces.length) {\r\n                        active = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            //Match found\r\n            if (active) {\r\n                break;\r\n            }\r\n            //Rotates board\r\n            let temp = boardSpaces[0];\r\n            for (let i = 0; i < boardSpaces.length; i++) {\r\n                boardSpaces[i] = boardSpaces[i + 1];\r\n            }\r\n            boardSpaces[boardSpaces.length - 1] = temp;\r\n        }\r\n        return active;\r\n    }\r\n\r\n    purgeNull(name) {\r\n        let purged = name.slice();\r\n        let j = 0;\r\n        while (j < purged.length) {\r\n            if (purged[j] === null) {\r\n                purged.splice(j, 1);\r\n            } else {\r\n                j++;\r\n            }\r\n        }\r\n        return purged;\r\n    }\r\n\r\n    render() {\r\n        let allPlayed = this.props.allPlayed.slice();\r\n        allPlayed.splice(this.props.pid - 1, 1);\r\n        for (let i = 0; i < allPlayed.length; i++) {\r\n            allPlayed[i] = this.updateActiveCards(this.props.spaces, allPlayed[i]);\r\n        }\r\n        let display = <Display\r\n            spaces={this.props.spaces} //[]\r\n            colorCounts={this.props.colorCounts} //[]\r\n            selectorClick={i => this.handleSelectorClick(i)} //function\r\n            boardClick={(i, j) => this.handleBoardClick(i, j)} //function\r\n            cards={this.state.cards} //[<Cards>]\r\n            played={this.state.played}//[<Cards>]\r\n            playClicked={() => this.handlePlayClick()} //function\r\n            discardClicked={() => this.handleDiscardClick()}\r\n            myTurn={this.props.pid === this.props.currentPlayer}\r\n            gameState={this.props.gameState}\r\n            allPlayed={allPlayed}\r\n        />;\r\n        let waiting = <Waiting players={this.props.players}/>;\r\n        let showMe = this.props.gameState === \"prestart\" ? waiting : display;\r\n        return (showMe);\r\n    }\r\n}\r\n\r\n//var connectTo = 'https://damoclesgame.herokuapp.com';\r\nvar connectTo = 'http://localhost:3000';\r\nvar socket = io.connect(connectTo);\r\n\r\n    let currentCookie = getCookie();\r\n    let localData = {};\r\n    if (currentCookie != \"\") {\r\n        console.log(currentCookie);\r\n        socket.emit('refreshCookie', currentCookie);\r\n    } else {\r\n        renderLogin(localData, socket);\r\n    }\r\n    socket.on('standby', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n    socket.on('boardChange', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n    socket.on('setupphase', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n    socket.on('cardUpdate', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n    socket.on('discardphase', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n    socket.on('cardPlayed', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n    socket.on('bonusswap', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n    socket.on('reflexed', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n    socket.on('cookify', function(data) {\r\n        document.cookie = data.cookie;\r\n        Object.assign(localData, data);\r\n        renderLobby(localData, socket);\r\n    });\r\n    socket.on('newroom', function(data) {\r\n        Object.assign(localData, data);\r\n        renderLobby(localData, socket);\r\n    });\r\n    socket.on('userjoined', function(data) {\r\n        Object.assign(localData, data);\r\n        renderGame(localData, socket);\r\n    });\r\n\r\nfunction renderGame(data, socket) {\r\n    ReactDOM.render(<Game   spaces={data.spaces} \r\n        colorCounts={data.colorCounts}\r\n        selectCards={data.selectCards}\r\n        gameState={data.gameState}\r\n        pid={data.pid}\r\n        currentPlayer={data.currentPlayer}\r\n        socket={socket}\r\n        played={data.played[data.pid - 1]}\r\n        allPlayed={data.played}\r\n        discardCount={data.discardCount}\r\n        processCode={data.processCode}\r\n        players={data.players}\r\n\r\n        />, document.getElementById(\"root\"));\r\n}\r\n\r\nfunction renderLobby(data, socket) {\r\n    ReactDOM.render(<Lobby\r\n        available={data.availableGames}\r\n    />, document.getElementById(\"root\"));\r\n}\r\n\r\nfunction renderLogin() {\r\n    ReactDOM.render(<Login\r\n            onClick={(user, pass) => logMeIn(user, pass)}\r\n        />, document.getElementById(\"root\"));\r\n}\r\n\r\nfunction logMeIn(user, pass) {\r\n    socket.emit(\"login\", {\r\n        username: user,\r\n        password: pass\r\n    });\r\n}\r\n\r\nfunction cardsEqual(a, b) {\r\n    return (a != null && b != null && a.one === b.one &&\r\n            a.two === b.two &&\r\n            a.three === b.three &&\r\n            a.four === b.four &&\r\n            a.five === b.five &&\r\n            a.six === b.six &&\r\n            a.seven === b.seven &&\r\n            a.type === b.type &&\r\n            a.id === b.id\r\n    );\r\n}\r\n\r\nfunction getCookie() {\r\n    var name = \"Damocles=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(\",\");\r\n    for(var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n\r\nclass Lobby extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        available: [],\r\n        selected: 2,\r\n        name: null\r\n      }\r\n    }\r\n    \r\n    selectChange(e) {\r\n      this.setState({\r\n        selected: e.target.value\r\n      });\r\n    }\r\n    \r\n    nameChange(e) {\r\n      this.setState({\r\n        name: e.target.value\r\n      });\r\n    }\r\n    \r\n    createNewValues() {\r\n        let name = this.state.name;\r\n        if (name != null) {\r\n            socket.emit(\"roomcreated\", {\r\n                name: name,\r\n                players: this.state.selected,\r\n                creator: getCookie()\r\n            });\r\n        }\r\n    }\r\n\r\n    joinRoom(id) {\r\n        socket.emit('roomjoined', {\r\n            user: getCookie(),\r\n            id: id\r\n        });\r\n    }\r\n\r\n    renderAvailable() {\r\n        let lobbies = [];\r\n        let games = this.props.available.slice();\r\n        for (let i = 0; i < games.length; i++) {\r\n            lobbies.push(<li \r\n                id={games[i].id}\r\n                onDoubleClick={(e) => this.joinRoom(e.target.id)}\r\n            >{games[i].name}</li>);\r\n        }\r\n        return (<div className=\"browser\">{lobbies}</div>\r\n        );\r\n    }\r\n    \r\n    render() {\r\n      return (<div id=\"lobby\">\r\n                <button type=\"button\" onClick={() => this.createNewValues()}>{\"New Instance\"}</button>\r\n                <label>{\"MAX PLAYERS\"}</label>\r\n                <select onChange={(e) => this.selectChange(e)} id=\"max_val\">\r\n                    <option value=\"2\">2</option>\r\n                    <option value=\"3\">3</option>\r\n                    <option value=\"4\">4</option>\r\n                    <option value=\"5\">5</option>\r\n                </select>\r\n          <input onInput={(e) => this.nameChange(e)}type=\"text\"></input>\r\n          {this.renderAvailable()}\r\n          </div> \r\n          );\r\n    }\r\n}\r\n"]}